<!DOCTYPE html>
<!-- saved from url=(0083)https://docs.google.com/document/d/1ICyAvKNAtZ3_3jgxQlFa9gE6asIG3ZAqm705SGXB6VQ/pub -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script type="text/javascript">
(function(){(function(){function d(a){this.t={};this.tick=function(a,b,c){this.t[a]=[void 0!=c?c:(new Date).getTime(),b]};this.tick("start",null,a)}var a=new d;window.jstiming={Timer:d,load:a};if(window.performance&&window.performance.timing){var a=window.performance.timing,b=window.jstiming.load,c=a.navigationStart,a=a.responseStart;0<c&&a>=c&&(b.tick("_wtsrt",void 0,c),b.tick("wtsrt_","_wtsrt",a),b.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),
b&&0<c&&(b.tick("_tbnd",void 0,window.chrome.csi().startE),b.tick("tbnd_","_tbnd",c))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,b&&0<c&&(b.tick("_tbnd",void 0,window.external.startE),b.tick("tbnd_","_tbnd",c))),a&&(window.jstiming.pt=a)}catch(e){}})();})()
</script><script type="text/javascript">var KX_timer = new window.jstiming.Timer(); KX_timer.name = 'published';</script><title>Enunciado LTW 2013/14</title><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon6.ico"><style type="text/css">
      body {
        font-family: arial, sans, sans-serif;
        margin: 0;
      }

      iframe {
        border: 0;
        frameborder: 0;
        height: 100%;
        width: 100%;
      }

      #header, #footer {
        background: #f0f0f0;
        padding: 10px 10px;
      }

      #header {
        border-bottom: 1px #ccc solid;
      }

      #footer {
        border-top: 1px #ccc solid;
        border-bottom: 1px #ccc solid;
        font-size: 13;
      }

      #contents {
        margin: 6px;
      }

      .dash {
        padding: 0 6px;
      }
    </style></head><body><div id="header">Enunciado LTW 2013/14</div><div id="contents"><style type="text/css">.lst-kix_an338bwvbzyd-4>li:before{content:"\0025cb  "}.lst-kix_qa7ragl5q6yr-8>li:before{content:"\0025a0  "}.lst-kix_2nx0o396tpui-8>li:before{content:"\0025a0  "}.lst-kix_j4a91hg35w2h-0>li:before{content:"\0025cf  "}.lst-kix_qa7ragl5q6yr-5>li:before{content:"\0025a0  "}.lst-kix_qa7ragl5q6yr-3>li:before{content:"\0025cf  "}.lst-kix_mm677ajqbqxd-5>li:before{content:"\0025a0  "}.lst-kix_yp346zvm24uo-7>li:before{content:"\0025cb  "}.lst-kix_an338bwvbzyd-8>li:before{content:"\0025a0  "}.lst-kix_3c3raeyu4q5k-2>li:before{content:"\0025a0  "}.lst-kix_yyg7hv4qsxkm-2>li:before{content:"\0025a0  "}ul.lst-kix_yp346zvm24uo-1{list-style-type:none}.lst-kix_3c3raeyu4q5k-6>li:before{content:"\0025cf  "}ul.lst-kix_yp346zvm24uo-0{list-style-type:none}ul.lst-kix_yp346zvm24uo-4{list-style-type:none}ul.lst-kix_yp346zvm24uo-5{list-style-type:none}.lst-kix_yp346zvm24uo-5>li:before{content:"\0025a0  "}ul.lst-kix_yp346zvm24uo-2{list-style-type:none}.lst-kix_wz7xldgh0qrj-5>li:before{content:"\0025a0  "}ul.lst-kix_yp346zvm24uo-3{list-style-type:none}ul.lst-kix_yp346zvm24uo-8{list-style-type:none}ul.lst-kix_yp346zvm24uo-6{list-style-type:none}.lst-kix_3c3raeyu4q5k-0>li:before{content:"\0025cf  "}ul.lst-kix_yp346zvm24uo-7{list-style-type:none}.lst-kix_yp346zvm24uo-0>li:before{content:"\0025cf  "}.lst-kix_j4a91hg35w2h-6>li:before{content:"\0025cf  "}.lst-kix_wz7xldgh0qrj-3>li:before{content:"\0025cf  "}.lst-kix_fgfq8040vfjd-8>li:before{content:"\0025a0  "}ul.lst-kix_yyg7hv4qsxkm-7{list-style-type:none}ul.lst-kix_yyg7hv4qsxkm-8{list-style-type:none}ul.lst-kix_yyg7hv4qsxkm-5{list-style-type:none}ul.lst-kix_mm677ajqbqxd-6{list-style-type:none}ul.lst-kix_yyg7hv4qsxkm-6{list-style-type:none}ul.lst-kix_mm677ajqbqxd-7{list-style-type:none}ul.lst-kix_yyg7hv4qsxkm-3{list-style-type:none}ul.lst-kix_mm677ajqbqxd-4{list-style-type:none}ul.lst-kix_yyg7hv4qsxkm-4{list-style-type:none}ul.lst-kix_mm677ajqbqxd-5{list-style-type:none}ul.lst-kix_yyg7hv4qsxkm-1{list-style-type:none}.lst-kix_2nx0o396tpui-0>li:before{content:"\0025cf  "}ul.lst-kix_yyg7hv4qsxkm-2{list-style-type:none}ul.lst-kix_mm677ajqbqxd-8{list-style-type:none}ul.lst-kix_yyg7hv4qsxkm-0{list-style-type:none}.lst-kix_4fqmo8u4ka86-2>li:before{content:"\0025a0  "}.lst-kix_kwk13uuimzqv-0>li:before{content:"\0025cf  "}ul.lst-kix_mm677ajqbqxd-3{list-style-type:none}.lst-kix_qa7ragl5q6yr-2>li:before{content:"\0025a0  "}.lst-kix_an338bwvbzyd-5>li:before{content:"\0025a0  "}ul.lst-kix_mm677ajqbqxd-2{list-style-type:none}ul.lst-kix_mm677ajqbqxd-1{list-style-type:none}ul.lst-kix_mm677ajqbqxd-0{list-style-type:none}.lst-kix_an338bwvbzyd-6>li:before{content:"\0025cf  "}ul.lst-kix_qa7ragl5q6yr-2{list-style-type:none}.lst-kix_j4a91hg35w2h-4>li:before{content:"\0025cb  "}.lst-kix_kwk13uuimzqv-1>li:before{content:"\0025cb  "}ul.lst-kix_qa7ragl5q6yr-1{list-style-type:none}ul.lst-kix_qa7ragl5q6yr-4{list-style-type:none}ul.lst-kix_qa7ragl5q6yr-3{list-style-type:none}ul.lst-kix_qa7ragl5q6yr-6{list-style-type:none}.lst-kix_an338bwvbzyd-2>li:before{content:"\0025a0  "}ul.lst-kix_qa7ragl5q6yr-5{list-style-type:none}.lst-kix_kwk13uuimzqv-6>li:before{content:"\0025cf  "}ul.lst-kix_qa7ragl5q6yr-8{list-style-type:none}ul.lst-kix_qa7ragl5q6yr-7{list-style-type:none}ul.lst-kix_fgfq8040vfjd-4{list-style-type:none}ul.lst-kix_fgfq8040vfjd-3{list-style-type:none}ul.lst-kix_fgfq8040vfjd-6{list-style-type:none}ul.lst-kix_fgfq8040vfjd-5{list-style-type:none}ul.lst-kix_fgfq8040vfjd-0{list-style-type:none}.lst-kix_2nx0o396tpui-4>li:before{content:"\0025cb  "}ul.lst-kix_fgfq8040vfjd-2{list-style-type:none}.lst-kix_j4a91hg35w2h-1>li:before{content:"\0025cb  "}ul.lst-kix_qa7ragl5q6yr-0{list-style-type:none}ul.lst-kix_fgfq8040vfjd-1{list-style-type:none}.lst-kix_fgfq8040vfjd-7>li:before{content:"\0025cb  "}ul.lst-kix_3c3raeyu4q5k-7{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-8{list-style-type:none}ul.lst-kix_fgfq8040vfjd-7{list-style-type:none}ul.lst-kix_fgfq8040vfjd-8{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-1{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-2{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-0{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-5{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-6{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-3{list-style-type:none}ul.lst-kix_3c3raeyu4q5k-4{list-style-type:none}.lst-kix_yyg7hv4qsxkm-1>li:before{content:"\0025cb  "}.lst-kix_8qg15dvjn9uy-5>li:before{content:"\0025a0  "}ul.lst-kix_wz7xldgh0qrj-1{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-2{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-0{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-5{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-6{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-3{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-4{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-7{list-style-type:none}ul.lst-kix_wz7xldgh0qrj-8{list-style-type:none}.lst-kix_yyg7hv4qsxkm-7>li:before{content:"\0025cb  "}ul.lst-kix_an338bwvbzyd-8{list-style-type:none}.lst-kix_4fqmo8u4ka86-0>li:before{content:"\0025cf  "}.lst-kix_j4a91hg35w2h-7>li:before{content:"\0025cb  "}.lst-kix_yp346zvm24uo-4>li:before{content:"\0025cb  "}.lst-kix_an338bwvbzyd-3>li:before{content:"\0025cf  "}.lst-kix_3c3raeyu4q5k-8>li:before{content:"\0025a0  "}.lst-kix_yp346zvm24uo-8>li:before{content:"\0025a0  "}.lst-kix_4fqmo8u4ka86-6>li:before{content:"\0025cf  "}.lst-kix_wz7xldgh0qrj-8>li:before{content:"\0025a0  "}ul.lst-kix_an338bwvbzyd-2{list-style-type:none}.lst-kix_8qg15dvjn9uy-7>li:before{content:"\0025cb  "}ul.lst-kix_an338bwvbzyd-3{list-style-type:none}ul.lst-kix_an338bwvbzyd-0{list-style-type:none}.lst-kix_mm677ajqbqxd-8>li:before{content:"\0025a0  "}ul.lst-kix_an338bwvbzyd-1{list-style-type:none}.lst-kix_8qg15dvjn9uy-3>li:before{content:"\0025cf  "}ul.lst-kix_an338bwvbzyd-6{list-style-type:none}.lst-kix_yyg7hv4qsxkm-0>li:before{content:"\0025cf  "}ul.lst-kix_an338bwvbzyd-7{list-style-type:none}ul.lst-kix_an338bwvbzyd-4{list-style-type:none}ul.lst-kix_an338bwvbzyd-5{list-style-type:none}.lst-kix_2nx0o396tpui-7>li:before{content:"\0025cb  "}.lst-kix_qa7ragl5q6yr-1>li:before{content:"\0025cb  "}.lst-kix_8qg15dvjn9uy-6>li:before{content:"\0025cf  "}.lst-kix_wz7xldgh0qrj-0>li:before{content:"\0025cf  "}.lst-kix_4fqmo8u4ka86-8>li:before{content:"\0025a0  "}.lst-kix_fgfq8040vfjd-5>li:before{content:"\0025a0  "}.lst-kix_3c3raeyu4q5k-5>li:before{content:"\0025a0  "}.lst-kix_j4a91hg35w2h-8>li:before{content:"\0025a0  "}.lst-kix_2nx0o396tpui-6>li:before{content:"\0025cf  "}.lst-kix_an338bwvbzyd-7>li:before{content:"\0025cb  "}.lst-kix_4fqmo8u4ka86-5>li:before{content:"\0025a0  "}.lst-kix_kwk13uuimzqv-5>li:before{content:"\0025a0  "}.lst-kix_kwk13uuimzqv-3>li:before{content:"\0025cf  "}.lst-kix_fgfq8040vfjd-2>li:before{content:"\0025a0  "}.lst-kix_mm677ajqbqxd-0>li:before{content:"\0025cf  "}.lst-kix_8qg15dvjn9uy-4>li:before{content:"\0025cb  "}.lst-kix_yp346zvm24uo-3>li:before{content:"\0025cf  "}.lst-kix_yyg7hv4qsxkm-4>li:before{content:"\0025cb  "}.lst-kix_yp346zvm24uo-2>li:before{content:"\0025a0  "}.lst-kix_mm677ajqbqxd-4>li:before{content:"\0025cb  "}ul.lst-kix_kwk13uuimzqv-8{list-style-type:none}ul.lst-kix_kwk13uuimzqv-7{list-style-type:none}.lst-kix_yyg7hv4qsxkm-3>li:before{content:"\0025cf  "}.lst-kix_8qg15dvjn9uy-0>li:before{content:"\0025cf  "}.lst-kix_mm677ajqbqxd-3>li:before{content:"\0025cf  "}.lst-kix_wz7xldgh0qrj-1>li:before{content:"\0025cb  "}.lst-kix_fgfq8040vfjd-4>li:before{content:"\0025cb  "}.lst-kix_yp346zvm24uo-6>li:before{content:"\0025cf  "}.lst-kix_j4a91hg35w2h-2>li:before{content:"\0025a0  "}.lst-kix_j4a91hg35w2h-3>li:before{content:"\0025cf  "}.lst-kix_3c3raeyu4q5k-7>li:before{content:"\0025cb  "}.lst-kix_yyg7hv4qsxkm-8>li:before{content:"\0025a0  "}.lst-kix_3c3raeyu4q5k-4>li:before{content:"\0025cb  "}.lst-kix_j4a91hg35w2h-5>li:before{content:"\0025a0  "}.lst-kix_3c3raeyu4q5k-1>li:before{content:"\0025cb  "}.lst-kix_yp346zvm24uo-1>li:before{content:"\0025cb  "}.lst-kix_8qg15dvjn9uy-2>li:before{content:"\0025a0  "}.lst-kix_wz7xldgh0qrj-4>li:before{content:"\0025cb  "}.lst-kix_mm677ajqbqxd-1>li:before{content:"\0025cb  "}.lst-kix_mm677ajqbqxd-2>li:before{content:"\0025a0  "}.lst-kix_2nx0o396tpui-2>li:before{content:"\0025a0  "}.lst-kix_an338bwvbzyd-0>li:before{content:"\0025cf  "}.lst-kix_4fqmo8u4ka86-4>li:before{content:"\0025cb  "}.lst-kix_kwk13uuimzqv-8>li:before{content:"\0025a0  "}.lst-kix_qa7ragl5q6yr-0>li:before{content:"\0025cf  "}.lst-kix_2nx0o396tpui-3>li:before{content:"\0025cf  "}.lst-kix_fgfq8040vfjd-0>li:before{content:"\0025cf  "}.lst-kix_8qg15dvjn9uy-8>li:before{content:"\0025a0  "}.lst-kix_an338bwvbzyd-1>li:before{content:"\0025cb  "}ul.lst-kix_kwk13uuimzqv-3{list-style-type:none}ul.lst-kix_kwk13uuimzqv-4{list-style-type:none}ul.lst-kix_kwk13uuimzqv-5{list-style-type:none}ul.lst-kix_kwk13uuimzqv-6{list-style-type:none}ul.lst-kix_kwk13uuimzqv-0{list-style-type:none}.lst-kix_qa7ragl5q6yr-6>li:before{content:"\0025cf  "}ul.lst-kix_kwk13uuimzqv-1{list-style-type:none}ul.lst-kix_kwk13uuimzqv-2{list-style-type:none}.lst-kix_2nx0o396tpui-5>li:before{content:"\0025a0  "}ul.lst-kix_j4a91hg35w2h-7{list-style-type:none}.lst-kix_yyg7hv4qsxkm-6>li:before{content:"\0025cf  "}ul.lst-kix_j4a91hg35w2h-6{list-style-type:none}.lst-kix_3c3raeyu4q5k-3>li:before{content:"\0025cf  "}ul.lst-kix_j4a91hg35w2h-5{list-style-type:none}ul.lst-kix_j4a91hg35w2h-4{list-style-type:none}.lst-kix_kwk13uuimzqv-2>li:before{content:"\0025a0  "}ul.lst-kix_j4a91hg35w2h-8{list-style-type:none}ul.lst-kix_4fqmo8u4ka86-3{list-style-type:none}ul.lst-kix_4fqmo8u4ka86-4{list-style-type:none}ul.lst-kix_4fqmo8u4ka86-5{list-style-type:none}ul.lst-kix_4fqmo8u4ka86-6{list-style-type:none}ul.lst-kix_4fqmo8u4ka86-0{list-style-type:none}.lst-kix_kwk13uuimzqv-7>li:before{content:"\0025cb  "}ul.lst-kix_4fqmo8u4ka86-1{list-style-type:none}ul.lst-kix_4fqmo8u4ka86-2{list-style-type:none}.lst-kix_wz7xldgh0qrj-7>li:before{content:"\0025cb  "}.lst-kix_qa7ragl5q6yr-7>li:before{content:"\0025cb  "}ul.lst-kix_4fqmo8u4ka86-8{list-style-type:none}ul.lst-kix_4fqmo8u4ka86-7{list-style-type:none}.lst-kix_8qg15dvjn9uy-1>li:before{content:"\0025cb  "}.lst-kix_yyg7hv4qsxkm-5>li:before{content:"\0025a0  "}.lst-kix_qa7ragl5q6yr-4>li:before{content:"\0025cb  "}ul.lst-kix_2nx0o396tpui-1{list-style-type:none}ul.lst-kix_2nx0o396tpui-0{list-style-type:none}ul.lst-kix_2nx0o396tpui-3{list-style-type:none}ul.lst-kix_2nx0o396tpui-2{list-style-type:none}ul.lst-kix_2nx0o396tpui-5{list-style-type:none}ul.lst-kix_2nx0o396tpui-4{list-style-type:none}ul.lst-kix_2nx0o396tpui-7{list-style-type:none}.lst-kix_mm677ajqbqxd-7>li:before{content:"\0025cb  "}ul.lst-kix_2nx0o396tpui-6{list-style-type:none}ul.lst-kix_2nx0o396tpui-8{list-style-type:none}.lst-kix_2nx0o396tpui-1>li:before{content:"\0025cb  "}.lst-kix_4fqmo8u4ka86-1>li:before{content:"\0025cb  "}.lst-kix_fgfq8040vfjd-3>li:before{content:"\0025cf  "}.lst-kix_fgfq8040vfjd-1>li:before{content:"\0025cb  "}.lst-kix_mm677ajqbqxd-6>li:before{content:"\0025cf  "}.lst-kix_wz7xldgh0qrj-6>li:before{content:"\0025cf  "}ul.lst-kix_8qg15dvjn9uy-0{list-style-type:none}ul.lst-kix_8qg15dvjn9uy-1{list-style-type:none}ul.lst-kix_8qg15dvjn9uy-2{list-style-type:none}ul.lst-kix_8qg15dvjn9uy-3{list-style-type:none}ul.lst-kix_8qg15dvjn9uy-4{list-style-type:none}.lst-kix_fgfq8040vfjd-6>li:before{content:"\0025cf  "}ul.lst-kix_8qg15dvjn9uy-5{list-style-type:none}ul.lst-kix_8qg15dvjn9uy-6{list-style-type:none}ul.lst-kix_8qg15dvjn9uy-7{list-style-type:none}ul.lst-kix_8qg15dvjn9uy-8{list-style-type:none}.lst-kix_4fqmo8u4ka86-7>li:before{content:"\0025cb  "}.lst-kix_4fqmo8u4ka86-3>li:before{content:"\0025cf  "}.lst-kix_kwk13uuimzqv-4>li:before{content:"\0025cb  "}ul.lst-kix_j4a91hg35w2h-0{list-style-type:none}ul.lst-kix_j4a91hg35w2h-1{list-style-type:none}.lst-kix_wz7xldgh0qrj-2>li:before{content:"\0025a0  "}ul.lst-kix_j4a91hg35w2h-2{list-style-type:none}ul.lst-kix_j4a91hg35w2h-3{list-style-type:none}ol{margin:0;padding:0}.c12{line-height:1.15;padding-top:0pt;text-align:left;padding-bottom:0pt}.c15{max-width:451.3pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c6{direction:ltr;margin-left:108pt}.c7{height:11pt;direction:ltr}.c4{color:inherit;text-decoration:inherit}.c1{direction:ltr;margin-left:72pt}.c3{margin:0;padding:0}.c5{direction:ltr;margin-left:144pt}.c0{font-family:"Courier New"}.c14{text-align:center}.c9{margin-left:36pt}.c11{text-decoration:underline}.c2{padding-left:0pt}.c13{margin-left:72pt}.c8{direction:ltr}.c10{color:#1155cc}.title{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:36pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}.subtitle{padding-top:18pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:24pt;font-family:"Georgia";padding-bottom:4pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Arial";padding-bottom:2pt}h5{padding-top:11pt;line-height:1.15;text-align:left;color:#666666;font-size:10pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:10pt;font-family:"Arial";padding-bottom:2pt}</style><h1 class="c8 c14"><a name="h.40lbgqoozvsv"></a><span>Sistema de faturação online </span></h1><p class="c14 c8"><span>Linguagens e Tecnologias Web</span></p><p class="c14 c8"><span>Outubro, 2013</span></p><p class="c7"><span></span></p><h2 class="c8"><a name="h.cdo6nvhss44j"></a><span>1. Introdução</span></h2><p class="c7"><span></span></p><p class="c8"><span>Pretende-se com este trabalho realizar um sistema de faturação, online, utilizando as linguagens e tecnologias lecionadas na disciplina. Este sistema deve consistir no seguinte conjunto de documentos:</span></p><ul class="c3 lst-kix_yyg7hv4qsxkm-0 start"><li class="c9 c2 c8"><span>Faturas</span></li><li class="c9 c2 c8"><span>Produtos</span></li><li class="c9 c2 c8"><span>Clientes.</span></li></ul><p class="c8"><span>Os documentos fatura contém referências para os documentos produto e, cada fatura, contém uma referência para um documento cliente.</span></p><p class="c8"><span>No desenvolvimento desta implementação deverão socorrer-se das linguagens e tecnologias abordadas na disciplina, nomeadamente, html, css, php, javascript, json, expressões regulares, e xml schema.</span></p><p class="c8"><span>Não serão, no entanto, permitidas frameworks, ou bibliotecas, para além do jQuery.</span></p><h2 class="c8"><a name="h.hg0mtann21cb"></a><span>2. Objectivos</span></h2><p class="c7"><span></span></p><p class="c8"><span>Este trabalho consiste na criação de uma base de dados, em sqlite, para armazenar os documentos &nbsp;necessários, uma API que permita o acesso aos dados por terceiros, e um conjunto de páginas Web que permita a manipulação dos documentos, nomeadamente, listagem, alteração, edição, remoção e exportação dos dados, em XML, de acordo com as regras definidas pela AT (Autoridade Tributária) no XML Schema Document saft-pt[2].</span></p><h2 class="c8"><a name="h.m8ahxpgw61b5"></a><span>3. Funcionalidades a implementar e tarefas por fases</span></h2><p class="c8"><span>O trabalho terá duas fases cujas tarefas estão identificadas abaixo. Na primeira fase deverá ser desenvolvida a BD e a &nbsp;um conjunto de script php e páginas web (html + css + javascript) para consulta da informação. Visto que nesta primeira fase não haverá ainda a funcionalidade de introdução/manipulação de dados, a BD deverá ser preenchida diretamente com um ficheiro de inicialização em SQL. É importante que esta base de dados tenha um número mínimo de documentos para demonstração das precauções tomadas para grandes volumes de dados, nomeadamente a paginação de listagens de documentos e a impressão de faturas que requeiram, pelo menos, duas páginas A4. A ausência de dados suficientes será considerada como ausência de funcionalidade.</span></p><p class="c7"><span></span></p><p class="c8"><span>Pretende-se que sejam implementadas as seguintes funcionalidades distribuídas pelas duas fases de entrega. As tarefas/funcionalidades estão identificadas com (1) ou (2) conforme a fase em que são requeridas.</span></p><p class="c7"><span></span></p><ul class="c3 lst-kix_yp346zvm24uo-0 start"><li class="c9 c2 c8"><span>Especificação e desenvolvimento de uma base de dados que permita armazenar documentos e três níveis de permissões de utilizadores </span><span>(leitor, apenas com permissões de read; editor com permissões de read e write; administrador com capacidade para </span><span>(des)promover utilizadores já registados</span><span class="c10">&nbsp;</span><span>a editores/leitores</span><span class="c10">(1)</span></li></ul><p class="c7"><span></span></p><ul class="c3 lst-kix_qa7ragl5q6yr-0 start"><li class="c9 c2 c8"><span>Criação da API de consulta, contendo, pelo menos, os seguintes métodos</span><span>&nbsp;(ver especificação mais abaixo) </span><span class="c10">(1)</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1 start"><li class="c1 c2"><span>/api/searchInvoicesByField.php</span></li><li class="c1 c2"><span>/api/searchCustomersByField.php</span></li><li class="c1 c2"><span>/api/searchProductsByField.php</span></li><li class="c1 c2"><span>/api/getInvoice.php</span></li><li class="c1 c2"><span>/api/getCustomer.php</span></li><li class="c1 c2"><span>/api/getProduct.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>Pesquisa e listagem de &nbsp;documentos sumarizados (faturas, clientes e produtos)</span><span>&nbsp;</span><span class="c10">(1)</span></li><li class="c9 c2 c8"><span>Visualização &nbsp;de &nbsp;documentos em detalhe (um documento, por página web, com todos os detalhes relevantes)</span><span>&nbsp;</span><span class="c10">(1)</span></li><li class="c9 c2 c8"><span>Formatação de uma fatura para impressão em A4 </span><span class="c10">(1)</span></li><li class="c9 c2 c8"><span>Criação da API de manipulação dos documentos, contendo, pelo menos, os seguintes métodos</span><span>&nbsp;(ver especificação mais abaixo)</span><span class="c10">(2)</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>/api/updateInvoice.php</span></li><li class="c1 c2"><span>/api/updateCustomer.php</span></li><li class="c1 c2"><span>/api/updateProduct.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>Edição/Criação de documentos</span><span class="c10">(2)</span></li><li class="c9 c2 c8"><span>Criação de utilizadores</span><span class="c10">(2)</span></li><li class="c9 c2 c8"><span>Autenticação</span><span>&nbsp;de utilizadores</span><span class="c10">(2)</span></li><li class="c9 c2 c8"><span>Gestão de utilizadores por parte dos administradores</span><span class="c10">(2)</span></li><li class="c9 c2 c8"><span>Exportação/Importação de documentos no formato saft-pt[2]. </span><span class="c10">(2)</span></li><li class="c9 c2 c8"><span>Importação de outras BD semelhantes usando a API definida </span><span class="c10">(2)</span></li></ul><p class="c7"><span></span></p><p class="c8"><span>Visto que a autenticação só será implementada na 2ª fase de entrega, na 1ª fase os scripts php não devem exigir um utilizador válido. Deverão, no entanto, na 2ª fase, ser melhorados/actualizados com o objectivo de verificar as permissões do utilizador para a acesso pretendido.</span></p><p class="c7"><span></span></p><h2 class="c8"><a name="h.zcrrj1i2u7ou"></a><span>4. Estrutura de dados</span></h2><p class="c8"><span>A estrutura de dados final dos documentos é a definida pelo saft-pt[2] e documentada na &nbsp;portaria n.º 274/2013 [1]. &nbsp;Porém, para a 1ª entrega, podem considerar apenas os seguintes campos:</span></p><p class="c8"><span>Faturas</span></p><ul class="c3 lst-kix_2nx0o396tpui-0 start"><li class="c9 c2 c8"><span>InvoiceNo &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Número da fatura</span></li><li class="c9 c2 c8"><span>InvoiceDate &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Data da fatura</span></li><li class="c9 c2 c8"><span>CustomerID &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Código do cliente</span></li><li class="c9 c2 c8"><span>Line&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Uma ou mais linhas de produtos com os seguintes campos&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li></ul><ul class="c3 lst-kix_2nx0o396tpui-1 start"><li class="c1 c2"><span>LineNumber&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Número da linha sequencial começando em 1</span></li><li class="c1 c2"><span>ProductCode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Código do Produto ou Serviço</span></li><li class="c1 c2"><span>Quantity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Nº de unidades vendidas</span></li><li class="c1 c2"><span>UnitPrice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Preço unitário</span></li><li class="c1 c2"><span>CreditAmount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Total = Quantity*UnitPrice</span></li><li class="c1 c2"><span>Tax&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Taxas (pode haver várias)</span></li></ul><ul class="c3 lst-kix_2nx0o396tpui-2 start"><li class="c6 c2"><span>TaxType&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Tipo de Taxa</span></li><li class="c6 c2"><span>TaxPercentage &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Percentagem da Taxa</span></li></ul><ul class="c3 lst-kix_2nx0o396tpui-0"><li class="c9 c2 c8"><span>DocumentTotals -&gt; Valores totais, do documento, com os seguintes campos</span></li></ul><ul class="c3 lst-kix_2nx0o396tpui-1"><li class="c1 c2"><span>TaxPayable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Total de Imposto&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class="c1 c2"><span>NetTotal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Total sem imposto (é a soma de todos os CreditAmount)</span></li><li class="c1 c2"><span>GrossTotal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; Total = NetTotal + &nbsp;TaxPayable</span></li></ul><p class="c7"><span></span></p><p class="c8"><span>Exemplo, em JSON, da estrutura de &nbsp;uma fatura (para a 1ª entrega)</span></p><p class="c1"><span class="c0">{</span></p><p class="c1"><span class="c0">&nbsp; "InvoiceNo" : "FT SEQ/1",</span></p><p class="c1"><span class="c0">&nbsp; "InvoiceDate" : "2013-09-27",</span></p><p class="c1"><span class="c0">&nbsp; "CustomerID" : 555560,</span></p><p class="c1"><span class="c0">&nbsp; "Line" :[ {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "LineNumber" : 1,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "ProductCode" : 125,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "Quantity" : 3,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "UnitPrice" : 90,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "CreditAmount" : 270,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "Tax" : {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; "TaxType" : "IVA",</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; "TaxPercentage" : 23.00</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; },</span></p><p class="c1"><span class="c0">&nbsp; {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "LineNumber" : 2,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "ProductCode" : 126,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "Quantity" : 1,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "UnitPrice" : 450,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "CreditAmount" : 450,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "Tax" : {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; "TaxType" : "IVA",</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; &nbsp; "TaxPercentage" : 23.00</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; }</span></p><p class="c1"><span class="c0">&nbsp; }],</span></p><p class="c1"><span class="c0">&nbsp; "DocumentTotals" : {</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "TaxPayable" : 165.6,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "NetTotal" : 720,</span></p><p class="c1"><span class="c0">&nbsp; &nbsp; "GrossTotal" : 885.6</span></p><p class="c1"><span class="c0">&nbsp; }</span></p><p class="c1"><span class="c0">}</span></p><p class="c8"><span>&nbsp; </span></p><p class="c8"><span>Cliente</span></p><ul class="c3 lst-kix_fgfq8040vfjd-0 start"><li class="c9 c2 c8"><span>CustomerID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Número do cliente</span></li><li class="c9 c2 c8"><span>CustomerTaxID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Nº de contribuinte do cliente </span></li><li class="c9 c2 c8"><span>CompanyName&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Nome do cliente</span></li><li class="c9 c2 c8"><span>BillingAddress&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Dados da morada &nbsp;</span></li></ul><ul class="c3 lst-kix_fgfq8040vfjd-1 start"><li class="c1 c2"><span>AddressDetail&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Rua/Av/Pc, número e andar</span></li><li class="c1 c2"><span>City&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Cidade</span></li><li class="c1 c2"><span>PostalCode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Código Postal</span></li><li class="c1 c2"><span>Country&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Código do País</span></li></ul><ul class="c3 lst-kix_fgfq8040vfjd-0"><li class="c9 c2 c8"><span>Email&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Email de contacto do cliente</span></li></ul><p class="c7"><span></span></p><p class="c8"><span>Produto</span></p><ul class="c3 lst-kix_j4a91hg35w2h-0 start"><li class="c9 c2 c8"><span>ProductCode&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Código do Produto</span></li><li class="c2 c8 c9"><span>ProductDescription&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Descrição do Produto ou Serviço</span></li><li class="c9 c2 c8"><span>UnitPrice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Preço unitário</span></li><li class="c9 c2 c8"><span>UnitOfMeasure&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;Unidade de medida do produto ou serviço</span></li></ul><p class="c7"><span></span></p><p class="c8"><span>A estes campos podem ser adicionados campos extra que se justifiquem, como por exemplo</span><span class="c0">,</span><span>&nbsp;nos documentos fatura, um campo </span><span class="c0">Status</span><span>&nbsp;que pode assumir os valores </span><span class="c0">iniciada, emitida </span><span>ou</span><span>&nbsp;</span><span class="c0">paga</span><span>. </span></p><p class="c8"><span>No entanto, deve-se ter presente que quando os documentos forem actualizados através da API, abaixo definida, estes campos podem não estar presentes. É da responsabilidade de cada &nbsp;implementação definir o que sucede, nesse caso, para manter o maior grau de compatibilidade possível com terceiros. &nbsp;</span></p><p class="c8"><span>No documento saft-pt[2] além dos campos estão também definidos os tipos de dados. A implementação deverá tirar partido das novas funcionalidades do HTML5 para validação dos dados antes de serem submetidos ao servidor, nomeadamente verificar os campos obrigatórios, tipos de dados (date, number, range, email, etc), limites máximos e mínimos, bem como verificar padrões (expressões regulares) quando for caso disso (ex: invoiceNO). &nbsp;</span></p><p class="c8"><span>A validação dos dados no cliente não dispensa, por questões de segurança, a validação dos dados do lado do servidor, isto é no PHP. Na submissão de dados via API, em caso de erro, deve ser retornado um objecto json indicando o(s) campo(s) em erro. Ex: </span><span class="c0">{“error”:{“code”:700,”reason”:”Field invalid”, “field”: “InvoiceNo”}}</span><span>&nbsp; &nbsp;</span></p><h2 class="c8"><a name="h.g9wmozyiezeg"></a><span>5. API</span></h2><p class="c8"><span>Os métodos aqui especificados são &nbsp;obrigatórios para haver compatibilidade entre as diversas implementações e devem ser obrigatoriamente suportados. Porém, cada implementação, é livre de definir mais métodos se tal se justificar, ou mesmo adicionar parâmetros opcionais (ex: limite) &nbsp;e, nos métodos que definem operações, pode também adicionar outras operações. </span></p><p class="c8"><span>Métodos</span></p><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>/api/searchInvoicesByField.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Tipo: GET</span></li><li class="c1 c2"><span>Parâmetros</span><span>: </span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-2 start"><li class="c6 c2"><span>field: nome do campo a pesquisar</span></li><li class="c6 c2"><span>value: valor a verificar. Este parâmetro pode ocorrer 1 ou mais vezes</span></li><li class="c2 c6"><span>op: Tipo de operação. Pode assumir um dos seguintes valores</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-3 start"><li class="c5 c2"><span>range</span></li><li class="c5 c2"><span>equal</span></li><li class="c5 c2"><span>contains</span></li><li class="c5 c2"><span>min</span></li><li class="c5 c2"><span>max</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Retorno: Um array json contendo os documentos encontrados. Para cada documento encontrado devem ser retornados, pelo menos, os seguintes campos: </span><span class="c0">InvoiceNo</span><span>, </span><span class="c0">InvoiceDate</span><span>, </span><span class="c0">CompanyName</span><span>&nbsp;e </span><span class="c0">GrossTotal</span><span>. Ex:</span></li></ul><p class="c6"><span class="c0">[{</span></p><p class="c6"><span class="c0">&nbsp; "InvoiceNo" : "FT SEQ/1",</span></p><p class="c6"><span class="c0">&nbsp; "InvoiceDate" : "2013-09-27",</span></p><p class="c6"><span class="c0">&nbsp; "CompanyName" : "Feup",</span></p><p class="c6"><span class="c0">&nbsp; "GrossTotal" : 885.6</span></p><p class="c6"><span class="c0">&nbsp; },</span></p><p class="c6"><span class="c0">&nbsp; {</span></p><p class="c6"><span class="c0">&nbsp; "InvoiceNo" : "FT SEQ/12",</span></p><p class="c6"><span class="c0">&nbsp; "InvoiceDate" : "2013-09-29",</span></p><p class="c6"><span class="c0">&nbsp; "CompanyName" : "Flup",</span></p><p class="c6"><span class="c0">&nbsp; "GrossTotal" : 432.5</span></p><p class="c6"><span class="c0">&nbsp;}]</span></p><p class="c1"><span>Se não forem encontradas faturas que obedeçam ao critério de pesquisa é retornado um array vazio</span><span class="c0">&nbsp;[]</span></p><p class="c7 c13"><span></span></p><p class="c12 c9 c8"><span>Se a</span><span>&nbsp;operaç</span><span>ão é </span><span class="c0">range</span><span>&nbsp;o parâmetro </span><span class="c0">value </span><span>deve ocorrer duas vezes e serão devolvidos todos documentos cujo campo identificado pelo parâmetro </span><span class="c0">field </span><span>esteja entre esses dois valores. Ex:</span></p><p class="c12 c1"><span class="c0">/api/searchInvoicesByField.php?op=range&amp;field=InvoiceDate&amp;value=2013-09-01&amp;value=2013-09-30</span></p><p class="c12 c9 c8"><span>Se a operação é </span><span class="c0">equal </span><span>só deverão ser retornados os documentos cujo campo identificado pelo parâmetro </span><span class="c0">field </span><span>seja igual ao valor especificado no parâmetro </span><span class="c0">value.</span><span>Ex:</span></p><p class="c1 c12"><span>/</span><span class="c0">api/searchInvoicesByField.php?op=equal&amp;field=InvoiceNo&amp;value=FT SEQ/1</span></p><p class="c12 c9 c8"><span>Se a operação é </span><span class="c0">contains </span><span>só deverão ser retornados os documentos cujo campo identificado pelo parâmetro </span><span class="c0">field </span><span>contenha o valor especificado no parâmetro </span><span class="c0">value.</span></p><p class="c12 c9 c8"><span>O campo </span><span class="c0">field</span><span>&nbsp;deve poder assumir, pelo menos, os seguintes valores: &nbsp;</span><span class="c0">InvoiceNo</span><span>, </span><span class="c0">InvoiceDate</span><span>, </span><span class="c0">GrossTotal</span><span>, </span><span class="c0">CompanyName</span><span>.</span></p><p class="c12 c9 c8"><span>Note-se que este último não é um campo presente na especificação da estrutura de dados, dos documentos do tipo fatura, mas pode ser relacionado através do campo </span><span class="c0">CustomerID</span><span>. </span><span class="c0">&nbsp;</span></p><p class="c12 c9 c8"><span class="c0">&nbsp;</span></p><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>/api/searchCustomersByField.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Tipo: GET</span></li><li class="c1 c2"><span>Parâmetros: </span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-2"><li class="c6 c2"><span>field: nome do campo a pesquisar</span></li><li class="c6 c2"><span>value: valor a verificar. Este parâmetro pode ocorrer 1 ou mais vezes</span></li><li class="c6 c2"><span>op: Tipo de operação. Pode assumir um dos seguintes valores</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-3"><li class="c5 c2"><span>range</span></li><li class="c5 c2"><span>equal</span></li><li class="c5 c2"><span>contains</span></li><li class="c5 c2"><span>min</span></li><li class="c5 c2"><span>max</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Retorno: Um array de objectos json contendo os documentos encontrados. Para cada documento encontrado devem ser retornados, pelo menos, os seguintes campos: </span><span class="c0">CustomerID</span><span>, </span><span class="c0">CustomerTaxID</span><span>&nbsp;e </span><span class="c0">CompanyName</span><span>. Se não forem encontrados clientes que obedeçam ao critério de pesquisa é retornado um array vazio</span><span class="c0">&nbsp;[]</span></li></ul><p class="c7 c13"><span></span></p><p class="c9 c8"><span>As diversas operações &nbsp;deverão ser implementadas de modo análogo ao especificado para o método </span><span class="c0">/api/searchInvoicesByField.php</span></p><p class="c9 c8"><span>O campo </span><span class="c0">field</span><span>&nbsp;deve poder assumir, pelo menos, os seguintes valores: </span><span class="c0">CustomerID, CustomerTaxID, CompanyName.</span></p><p class="c7 c9"><span class="c0"></span></p><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>/api/searchProductsByField.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Tipo: GET</span></li><li class="c1 c2"><span>Parâmetros: </span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-2"><li class="c6 c2"><span>field: nome do campo a pesquisar</span></li><li class="c6 c2"><span>value: valor a verificar. Este parâmetro pode ocorrer 1 ou mais vezes</span></li><li class="c6 c2"><span>op: Tipo de operação. Pode assumir um dos seguintes valores</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-3"><li class="c5 c2"><span>range</span></li><li class="c5 c2"><span>equal</span></li><li class="c2 c5"><span>contains</span></li><li class="c5 c2"><span>min</span></li><li class="c5 c2"><span>max</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Retorno: Um array de objectos json contendo os documentos encontrados. Para cada documento encontrado devem ser retornados, pelo menos, os seguintes campos: </span><span class="c0">ProductCode</span><span>, </span><span class="c0">ProductDescription</span><span>&nbsp;e </span><span class="c0">UnitPrice</span><span>. Se não forem encontrados produtos que obedeçam ao critério de pesquisa é retornado um array vazio</span><span class="c0">&nbsp;[]</span></li></ul><p class="c7 c13"><span></span></p><p class="c9 c8"><span>As diversas operações &nbsp;deverão ser implementadas de modo análogo ao especificado para o método </span><span class="c0">/api/searchInvoicesByField.php</span></p><p class="c9 c8"><span>O campo </span><span class="c0">field</span><span>&nbsp;deve poder assumir, pelo menos, os seguintes valores: </span><span class="c0">CustomerID, CustomerTaxID, CompanyName.</span></p><p class="c7 c9"><span class="c0"></span></p><ul class="c3 lst-kix_mm677ajqbqxd-0 start"><li class="c9 c2 c8"><span>/api/getInvoice.php</span></li></ul><ul class="c3 lst-kix_mm677ajqbqxd-1 start"><li class="c1 c2"><span>Tipo: GET</span></li><li class="c1 c2"><span>Parâmetros:</span></li></ul><ul class="c3 lst-kix_mm677ajqbqxd-2 start"><li class="c6 c2"><span>InvoiceNo. Número da fatura</span></li></ul><ul class="c3 lst-kix_mm677ajqbqxd-1"><li class="c1 c2"><span>Retorno: &nbsp;Se a fatura existe deve ser devolvida em formato json, caso contrário deve ser devolvido um objecto json com um campo error. Ex: </span><span class="c0">{“error”:{“code”:404,”reason”:”Invoice not found”}}<br></span></li></ul><ul class="c3 lst-kix_mm677ajqbqxd-0"><li class="c9 c2 c8"><span>/api/getCustomer.php</span></li></ul><ul class="c3 lst-kix_mm677ajqbqxd-1"><li class="c1 c2"><span>Tipo: GET</span></li><li class="c1 c2"><span>Parâmetros:</span></li></ul><ul class="c3 lst-kix_mm677ajqbqxd-2"><li class="c6 c2"><span>CustomerID. ID do cliente</span></li></ul><ul class="c3 lst-kix_mm677ajqbqxd-1"><li class="c1 c2"><span>Retorno: Se o cliente existe deve ser devolvido em formato json, caso contrário deve ser devolvido um objecto json com um campo error. Ex: </span><span class="c0">{“error”:{“code”:601,”reason”:”Permission denied”}}<br></span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>/api/getProduct.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Tipo: GET</span></li><li class="c1 c2"><span>Parâmetros:</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-2"><li class="c6 c2"><span>ProductCode: Código do Produto</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Retorno: Se o produto existe deve ser devolvido em formato json, caso contrário deve ser devolvido um objecto json com um campo error. Ex: </span><span class="c0">{“error”:{“code”:404,”reason”:”Customer not found”}}<br></span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>/api/updateInvoice.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Tipo: POST</span></li><li class="c1 c2"><span>Parâmetros: &nbsp;</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-2"><li class="c6 c2"><span>invoice: Uma string JSON contendo o documento fatura a actualizar. Se o documento tiver o campo </span><span class="c0">invoiceNo</span><span>&nbsp;vazio deve ser criada uma nova fatura atribuindo-lhe um número sequencial igual ao último documento mais 1. Exemplo, se o último documento é FT SEQ/20 o novo documento deve ser &nbsp;FT SEQ/21</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Retorno: devolve, em caso de sucesso, a fatura actualizada, adicionando-lhe, eventualmente, os campos adicionados pelo sistema. Exemplo </span><span class="c0">SystemEntryDate</span><span>&nbsp;(ver saft-pt[2]). Em caso de error deve devolver um objeto JSON com o campo error contendo o código do erro e uma descrição do erro. Ex: </span><span class="c0">{“error”:{“code”:404,”reason”:”Invoice not found”}}</span></li></ul><p class="c7 c9"><span class="c0"></span></p><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>/api/updateCustomer.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Tipo: POST</span></li><li class="c1 c2"><span>Parâmetros: &nbsp;</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-2"><li class="c6 c2"><span>customer: Uma string JSON contendo o documento cliente a actualizar. Se o documento tiver o campo </span><span class="c0">CustomerID</span><span>&nbsp;vazio deve ser criada um novo cliente atribuindo-lhe um ID único.</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Retorno: devolve, em caso de sucesso, o cliente actualizado. Em caso de error deve devolver um objeto JSON com o campo error contendo o código do erro e uma descrição do erro. Ex: </span><span class="c0">{“error”:{“code”:601,”reason”:”Permission denied”}}</span></li></ul><p class="c7 c9"><span class="c0"></span></p><ul class="c3 lst-kix_qa7ragl5q6yr-0"><li class="c9 c2 c8"><span>/api/updateProduct.php</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Tipo: POST</span></li><li class="c1 c2"><span>Parâmetros: &nbsp;</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-2"><li class="c6 c2"><span>product: Uma string JSON contendo o documento produto a actualizar. Se o documento tiver o campo </span><span class="c0">ProductCode</span><span>&nbsp;vazio deve ser criada um novo produto atribuindo-lhe um Código único.</span></li></ul><ul class="c3 lst-kix_qa7ragl5q6yr-1"><li class="c1 c2"><span>Retorno: devolve, em caso de sucesso, o produto actualizado. Em caso de error deve devolver um objeto JSON com o campo error contendo o código do erro e uma descrição do erro. Ex: </span><span class="c0">{“error”:{“code”:404,”reason”:”Invoice not found”}}</span></li></ul><p class="c7"><span></span></p><p class="c8"><span>Nos métodos updateXXXX.php acima indicados, os documentos JSON enviados para o servidor devem conter os campos &nbsp;obrigatórios definidos no saft-pt[2]. O cliente do serviço pode, no entanto, incluir outros campos definidos como opcionais no saft-pt[2], ou mesmo campos extra que se justifiquem. </span></p><p class="c8"><span>No entanto, o fornecedor do serviço é livre de descartar, ou não, os campos não marcados como obrigatórios no saft-pt[2]. No retorno deve devolver o documento tal como foi armazenado no sistema para, dessa forma, o cliente de serviço ter conhecimento dos campos efetivamente guardados. </span></p><h2 class="c8"><a name="h.lun7epu73nke"></a><span>6. Entrega do Projecto</span></h2><p class="c7"><span></span></p><p class="c8"><span>Todos os ficheiros (documentação, base de dados, PHP, etc.) devem ser submetidos através do Moodle num ficheiro comprimido (zip) com o nome do grupo (exemplo: T1G1.zip). A pasta-raiz deve ser a própria raiz do website e deverá conter pelo menos um ficheiro readme.html. O conteúdo deste ficheiro deve conter:</span></p><p class="c7"><span></span></p><ul class="c3 lst-kix_4fqmo8u4ka86-0 start"><li class="c9 c2 c8"><span>Nome do grupo</span></li><li class="c9 c2 c8"><span>Identificação dos elementos do grupo</span></li><li class="c9 c2 c8"><span class="c11">Pelo menos um utilizador de cada tipo e as respectivas passwords</span></li><li class="c9 c2 c8"><span>Listagem das funcionalidades implementadas</span></li><li class="c9 c2 c8"><span>Quaisquer notas adicionais que ache relevante</span></li></ul><p class="c7"><span></span></p><p class="c8"><span>O projecto deverá funcionar sem necessidade de se realizarem alterações. Deve ser apenas necessário fazer a descompactação dos ficheiros para uma pasta vazia para que o projecto funcione. Por favor, verifique e teste antes de submeter.</span></p><p class="c7"><span></span></p><h3 class="c8"><a name="h.7wov0vqys4p"></a><span>Referências</span></h3><p class="c8"><span>[1] Portaria n.º 274/2013 (</span><span class="c11 c10"><a class="c4" href="http://info.portaldasfinancas.gov.pt/NR/rdonlyres/BA9FB096-D482-445D-A5DB-C05B1980F7D7/0/Portaria_274_2013_21_09.pdf">http://info.portaldasfinancas.gov.pt/NR/rdonlyres/BA9FB096-D482-445D-A5DB-C05B1980F7D7/0/Portaria_274_2013_21_09.pdf</a></span><span>)</span></p><p class="c8"><span>[2] SAFT-PT (</span><span class="c10 c11"><a class="c4" href="http://info.portaldasfinancas.gov.pt/apps/saft-pt03/SAFTPT1.03_01.xsd">http://info.portaldasfinancas.gov.pt/apps/saft-pt03/SAFTPT1.03_01.xsd</a></span><span>)</span></p></div><div id="footer"><span>Published by <a target="_blank" title="Learn more about Google Drive" href="https://docs.google.com/">Google Drive</a></span><span class="dash">–</span><a href="https://docs.google.com/abuse?id=1ICyAvKNAtZ3_3jgxQlFa9gE6asIG3ZAqm705SGXB6VQ">Report Abuse</a><span class="dash">–</span><span>Updated automatically every 5 minutes</span></div><script type="text/javascript">
(function(){if(window.jstiming){window.jstiming.a={};window.jstiming.b=1;var e=function(b,a,d){var c=b.t[a],g=b.t.start;if(c&&(g||d))return c=b.t[a][0],void 0!=d?g=d:g=g[0],c-g},n=function(b,a,d){var c="";window.jstiming.pt&&(c+="&srt="+window.jstiming.pt,delete window.jstiming.pt);try{window.external&&window.external.tran?c+="&tran="+window.external.tran:window.gtbExternal&&window.gtbExternal.tran?c+="&tran="+window.gtbExternal.tran():window.chrome&&window.chrome.csi&&(c+="&tran="+window.chrome.csi().tran)}catch(g){}var f=
window.chrome;if(f&&(f=f.loadTimes)){f().wasFetchedViaSpdy&&(c+="&p=s");if(f().wasNpnNegotiated){var c=c+"&npn=1",k=f().npnNegotiatedProtocol;k&&(c+="&npnv="+(encodeURIComponent||escape)(k))}f().wasAlternateProtocolAvailable&&(c+="&apa=1")}var l=b.t,s=l.start,f=[],k=[],h;for(h in l)if("start"!=h&&0!=h.indexOf("_")){var m=l[h][1];m?l[m]&&k.push(h+"."+e(b,h,l[m][0])):s&&f.push(h+"."+e(b,h))}delete l.start;if(a)for(var p in a)c+="&"+p+"="+a[p];(a=d)||(a="https:"==document.location.protocol?"https://csi.gstatic.com/csi":
"http://csi.gstatic.com/csi");return[a,"?v=3","&s="+(window.jstiming.sn||"_s")+"&action=",b.name,k.length?"&it="+k.join(","):"",c,"&rt=",f.join(",")].join("")};window.jstiming.getReportUri=n;var q=function(b,a,d){b=n(b,a,d);if(!b)return"";a=new Image;var c=window.jstiming.b++;window.jstiming.a[c]=a;a.onload=a.onerror=function(){window.jstiming&&delete window.jstiming.a[c]};a.src=b;a=null;return b};window.jstiming.report=function(b,a,d){if("prerender"==document.webkitVisibilityState){var c=!1,g=function(){if(!c){a?
a.prerender="1":a={prerender:"1"};var f;"prerender"==document.webkitVisibilityState?f=!1:(q(b,a,d),f=!0);f&&(c=!0,document.removeEventListener("webkitvisibilitychange",g,!1))}};document.addEventListener("webkitvisibilitychange",g,!1);return""}return q(b,a,d)};window.jstiming.reportDone=function(b){if(window.jstiming.b<=(b||1))return!1;for(var a in window.jstiming.a)return!1;return!0};var r=function(b,a,d,c){return 0<d?(c?b.tick(a,c,d):b.tick(a,"",d),!0):!1};window.jstiming.getNavTiming=function(b){if(window.performance&&
window.performance.timing){var a=window.performance.timing;r(b,"_dns",a.domainLookupStart)&&r(b,"dns_",a.domainLookupEnd,"_dns");r(b,"_con",a.connectStart)&&r(b,"con_",a.connectEnd,"_con");r(b,"_req",a.requestStart)&&r(b,"req_",a.responseStart,"_req");r(b,"_rcv",a.responseStart)&&r(b,"rcv_",a.responseEnd,"_rcv");if(r(b,"_ns",a.navigationStart)){r(b,"ntsrt_",a.responseStart,"_ns");r(b,"nsfs_",a.fetchStart,"_ns");var d=window.external&&window.external.startE;!d&&window.chrome&&window.chrome.csi&&(d=
Math.floor(window.chrome.csi().startE));d&&(r(b,"_se",d),r(b,"sens_",a.navigationStart,"_se"));r(b,"ntplt0_",a.loadEventStart,"_ns");r(b,"ntplt1_",a.loadEventEnd,"_ns")}}}};})()
</script><script type="text/javascript">KX_timer.tick('tl'); if (document.location.protocol == 'https:') {window.jstiming.report(KX_timer, undefined , 'https://gg.google.com/csi');} else {window.jstiming.report(KX_timer);}</script></body></html>